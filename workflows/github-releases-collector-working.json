{
  "name": "GitHub Vue/Nuxt Releases Collector (Working)",
  "nodes": [
    {
      "parameters": {},
      "id": "f8a8c0e0-7e7e-4b7e-9c1c-7f7e7e7e7e7e",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "url": "https://api.github.com/repos/vuejs/core/releases",
        "options": {
          "queryParameters": {
            "parameters": [
              {"name": "per_page", "value": "10"}
            ]
          },
          "headers": {
            "parameters": [
              {"name": "Accept", "value": "application/vnd.github.v3+json"},
              {"name": "User-Agent", "value": "Vue-Nuxt-News-Collector"}
            ]
          }
        }
      },
      "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
      "name": "Get Vue.js Releases",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "url": "https://api.github.com/repos/nuxt/nuxt/releases",
        "options": {
          "queryParameters": {
            "parameters": [
              {"name": "per_page", "value": "10"}
            ]
          },
          "headers": {
            "parameters": [
              {"name": "Accept", "value": "application/vnd.github.v3+json"},
              {"name": "User-Agent", "value": "Vue-Nuxt-News-Collector"}
            ]
          }
        }
      },
      "id": "b2c3d4e5-f6g7-8901-bcde-f23456789012",
      "name": "Get Nuxt.js Releases",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [460, 480]
    },
    {
      "parameters": {
        "mode": "append"
      },
      "id": "c3d4e5f6-g7h8-9012-cdef-345678901234",
      "name": "Combine Releases",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [680, 390]
    },
    {
      "parameters": {
        "jsCode": "// Process and structure GitHub release data\nconst processedReleases = [];\n\nfor (const item of $input.all()) {\n  if (item.json && Array.isArray(item.json)) {\n    for (const release of item.json) {\n      const isVue = release.html_url.includes('/vuejs/');\n      const isNuxt = release.html_url.includes('/nuxt/');\n      \n      const processedRelease = {\n        framework: isVue ? 'Vue.js' : isNuxt ? 'Nuxt.js' : 'Unknown',\n        version: release.tag_name,\n        name: release.name || release.tag_name,\n        description: release.body ? release.body.substring(0, 500) + '...' : 'No description available',\n        published_date: release.published_at,\n        html_url: release.html_url,\n        draft: release.draft,\n        prerelease: release.prerelease,\n        author: release.author ? release.author.login : 'Unknown',\n        assets_count: release.assets ? release.assets.length : 0,\n        download_count: release.assets ? \n          release.assets.reduce((sum, asset) => sum + (asset.download_count || 0), 0) : 0,\n        created_at: release.created_at,\n        repository: isVue ? 'vuejs/core' : isNuxt ? 'nuxt/nuxt' : 'unknown',\n        // Add formatted fields for display\n        published_date_formatted: new Date(release.published_at).toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric'\n        }),\n        is_major: release.tag_name.match(/\\.(0)\\.0/) ? true : false,\n        is_minor: release.tag_name.match(/\\d+\\.(\\d+)\\.0/) && !release.tag_name.match(/\\.(0)\\.0/) ? true : false,\n        version_type: release.prerelease ? 'Prerelease' : release.draft ? 'Draft' : 'Stable'\n      };\n      \n      processedReleases.push(processedRelease);\n    }\n  }\n}\n\n// Sort by published date (newest first)\nprocessedReleases.sort((a, b) => new Date(b.published_date) - new Date(a.published_date));\n\nreturn processedReleases.map(release => ({ json: release }));"
      },
      "id": "d4e5f6g7-h8i9-0123-defg-456789012345",
      "name": "Process Release Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 390]
    },
    {
      "parameters": {
        "jsCode": "// Create formatted outputs for Slack and Obsidian (NO console.log)\nconst releases = $input.all();\nconst vueReleases = releases.filter(r => r.json.framework === 'Vue.js');\nconst nuxtReleases = releases.filter(r => r.json.framework === 'Nuxt.js');\n\nconst currentWeek = new Date();\nconst oneWeekAgo = new Date(currentWeek.getTime() - (7 * 24 * 60 * 60 * 1000));\n\n// Filter recent releases (last week)\nconst recentReleases = releases.filter(r => \n  new Date(r.json.published_date) > oneWeekAgo\n);\n\n// Create Slack message format\nconst slackMessage = {\n  text: 'ðŸš€ Weekly Vue.js & Nuxt.js Releases Summary',\n  blocks: [\n    {\n      type: 'header',\n      text: {\n        type: 'plain_text',\n        text: 'ðŸš€ Vue.js & Nuxt.js Weekly Release Summary'\n      }\n    },\n    {\n      type: 'section',\n      text: {\n        type: 'mrkdwn',\n        text: `ðŸ“Š *Summary for ${currentWeek.toLocaleDateString('en-US')}*\\nâ€¢ Total releases checked: ${releases.length}\\nâ€¢ Vue.js releases: ${vueReleases.length}\\nâ€¢ Nuxt.js releases: ${nuxtReleases.length}\\nâ€¢ Recent releases (last 7 days): ${recentReleases.length}`\n      }\n    }\n  ]\n};\n\n// Add recent releases to Slack message\nif (recentReleases.length > 0) {\n  slackMessage.blocks.push({\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: '*ðŸ†• Recent Releases:*'\n    }\n  });\n  \n  recentReleases.slice(0, 5).forEach(r => {\n    const release = r.json;\n    const emoji = release.framework === 'Vue.js' ? 'ðŸ’š' : 'ðŸŸ¢';\n    slackMessage.blocks.push({\n      type: 'section',\n      text: {\n        type: 'mrkdwn',\n        text: `${emoji} *${release.framework} ${release.version}*\\nðŸ“… ${release.published_date_formatted}\\nðŸ”— <${release.html_url}|View Release>`\n      }\n    });\n  });\n} else {\n  slackMessage.blocks.push({\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: 'ðŸ” No new releases in the last week.'\n    }\n  });\n}\n\n// Add latest versions section\nif (vueReleases.length > 0 || nuxtReleases.length > 0) {\n  let latestText = '*ðŸ“‹ Current Latest Versions:*\\n';\n  if (vueReleases.length > 0) {\n    const latest = vueReleases[0].json;\n    latestText += `ðŸ’š Vue.js: ${latest.version} (${latest.published_date_formatted})\\n`;\n  }\n  if (nuxtReleases.length > 0) {\n    const latest = nuxtReleases[0].json;\n    latestText += `ðŸŸ¢ Nuxt.js: ${latest.version} (${latest.published_date_formatted})\\n`;\n  }\n  \n  slackMessage.blocks.push({\n    type: 'section',\n    text: {\n      type: 'mrkdwn',\n      text: latestText\n    }\n  });\n}\n\n// Create Obsidian note format\nconst obsidianNote = {\n  title: `Vue & Nuxt Releases - ${currentWeek.toLocaleDateString('en-US')}`,\n  content: `# Vue.js & Nuxt.js Release Summary\\n\\n**Date:** ${currentWeek.toLocaleDateString('en-US')}\\n**Collection Time:** ${new Date().toISOString()}\\n\\n## ðŸ“Š Summary\\n\\n- **Total releases checked:** ${releases.length}\\n- **Vue.js releases:** ${vueReleases.length}\\n- **Nuxt.js releases:** ${nuxtReleases.length}\\n- **Recent releases (last 7 days):** ${recentReleases.length}\\n\\n## ðŸ†• Recent Releases\\n\\n${recentReleases.length > 0 ? recentReleases.map(r => {\n    const release = r.json;\n    return `### ${release.framework} ${release.version}\\n\\n- **Published:** ${release.published_date_formatted}\\n- **Type:** ${release.version_type}\\n- **Repository:** ${release.repository}\\n- **URL:** [${release.html_url}](${release.html_url})\\n- **Description:** ${release.description}\\n`;\n  }).join('\\n') : 'No new releases in the last week.'}\\n\\n## ðŸ“‹ Latest Versions\\n\\n${vueReleases.length > 0 ? `**Vue.js:** ${vueReleases[0].json.version} (${vueReleases[0].json.published_date_formatted})\\n` : ''}${nuxtReleases.length > 0 ? `**Nuxt.js:** ${nuxtReleases[0].json.version} (${nuxtReleases[0].json.published_date_formatted})\\n` : ''}\\n## ðŸ·ï¸ Tags\\n\\n#vue #nuxt #releases #weekly-summary\\n\\n---\\n*Generated automatically by Vue-Nuxt News Collector*`\n};\n\n// Create summary with all formats (NO console.log statements)\nconst summary = {\n  // Raw data\n  total_releases: releases.length,\n  vue_releases: vueReleases.length,\n  nuxt_releases: nuxtReleases.length,\n  recent_releases: recentReleases.length,\n  latest_vue: vueReleases.length > 0 ? vueReleases[0].json : null,\n  latest_nuxt: nuxtReleases.length > 0 ? nuxtReleases[0].json : null,\n  collection_timestamp: new Date().toISOString(),\n  \n  // Formatted outputs\n  slack_message: slackMessage,\n  obsidian_note: obsidianNote,\n  \n  // All releases data\n  releases: releases.map(r => r.json),\n  recent_releases_data: recentReleases.map(r => r.json),\n  \n  // Success indicator\n  success: true,\n  message: \"Vue & Nuxt releases collected and formatted successfully!\"\n};\n\nreturn [{ json: summary }];"
      },
      "id": "e5f6g7h8-i9j0-1234-efgh-567890123456",
      "name": "Format for Output",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1120, 390]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [[
        {"node": "Get Vue.js Releases", "type": "main", "index": 0},
        {"node": "Get Nuxt.js Releases", "type": "main", "index": 0}
      ]]
    },
    "Get Vue.js Releases": {
      "main": [[
        {"node": "Combine Releases", "type": "main", "index": 0}
      ]]
    },
    "Get Nuxt.js Releases": {
      "main": [[
        {"node": "Combine Releases", "type": "main", "index": 1}
      ]]
    },
    "Combine Releases": {
      "main": [[
        {"node": "Process Release Data", "type": "main", "index": 0}
      ]]
    },
    "Process Release Data": {
      "main": [[
        {"node": "Format for Output", "type": "main", "index": 0}
      ]]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "3.0.0",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "id": "github-releases-collector-working",
  "tags": [
    {
      "createdAt": "2024-09-30T09:00:00.000Z",
      "updatedAt": "2024-09-30T09:00:00.000Z",
      "id": "vue-nuxt",
      "name": "vue-nuxt"
    }
  ]
}